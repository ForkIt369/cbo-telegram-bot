<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CBO Bro - Telegram Mini App</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/telegram-wrapper.css">
    <link rel="stylesheet" href="css/chat-interface-clean.css">
</head>
<body>
    <!-- Telegram Mobile Wrapper -->
    <div class="telegram-wrapper">
        <!-- Phone Status Bar -->
        <div class="phone-status-bar">
            <div class="status-time">9:41</div>
            <div class="status-icons">
                <svg class="status-icon" viewBox="0 0 24 24" width="16" height="16">
                    <path fill="currentColor" d="M1 9h6v6H1V9zm1 1v4h4v-4H2zm7-1h6v6H9V9zm1 1v4h4v-4h-4zm7-1h6v6h-6V9zm1 1v4h4v-4h-4z"/>
                </svg>
                <svg class="status-icon" viewBox="0 0 24 24" width="16" height="16">
                    <path fill="currentColor" d="M2 17h20v2H2zm1.15-4.05L4 11.47l.85 1.48 1.3-.75-.85-1.48H7v-1.5H2v1.5h2.15L3 10.72zm7.45.65c1.48-2.31 3.52-4.15 5.9-5.31l-.4-.72C13.77 8.69 11.73 10.5 10.23 12.74l.92.51z"/>
                </svg>
                <svg class="status-icon battery" viewBox="0 0 24 24" width="20" height="16">
                    <path fill="currentColor" d="M16 6H7v12h9V6zm.67-2H15V2h-6v2H7.33C6.6 4 6 4.6 6 5.33v15.34C6 21.4 6.6 22 7.33 22h9.34c.73 0 1.33-.6 1.33-1.33V5.33C18 4.6 17.4 4 16.67 4z"/>
                </svg>
            </div>
        </div>

        <!-- Telegram Header -->
        <div class="telegram-header">
            <button class="tg-back-btn">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor" d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                </svg>
            </button>
            <div class="tg-header-center">
                <div class="tg-app-name">BroVerse Business</div>
                <div class="tg-app-subtitle">Mini App</div>
            </div>
            <button class="tg-menu-btn">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <circle cx="12" cy="5" r="1.5" fill="currentColor"/>
                    <circle cx="12" cy="12" r="1.5" fill="currentColor"/>
                    <circle cx="12" cy="19" r="1.5" fill="currentColor"/>
                </svg>
            </button>
        </div>

        <!-- Mini App Container -->
        <div class="mini-app-container">
            <!-- Header -->
            <header class="header">
                <div class="header-content">
                    <div class="avatar-badge">
                        <img src="assets/avatars/cbo.png" alt="CBO" class="avatar-img">
                        <div class="avatar-info">
                            <div class="avatar-name">Chief Bro Officer</div>
                            <div class="avatar-status">
                                <span class="status-dot"></span>
                                <span>Analyzing flows</span>
                            </div>
                        </div>
                    </div>
                    <div class="header-actions">
                        <button class="header-btn" aria-label="New chat">
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M12 5v14m-7-7h14" stroke="currentColor" fill="none" stroke-width="2"/>
                            </svg>
                        </button>
                        <button class="header-btn" aria-label="Menu">
                            <svg class="icon" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="1"/>
                                <circle cx="12" cy="5" r="1"/>
                                <circle cx="12" cy="19" r="1"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Welcome Screen -->
            <div class="welcome-screen" id="welcomeScreen">
                <div class="welcome-content">
                    <div class="cbo-avatar-large">
                        <img src="assets/avatars/cbo.png" alt="CBO">
                    </div>
                    <h1 class="welcome-title">Chief Bro Officer</h1>
                    <p class="welcome-subtitle">Your Business Optimization Expert</p>
                    <p class="welcome-description">I analyze your business through Four Flows: Value, Info, Work, and Cash to unlock growth opportunities</p>
                    
                    <button class="start-chat-btn" onclick="startChat()">
                        <span class="btn-text">Start Analyzing</span>
                        <svg class="btn-icon" viewBox="0 0 24 24" width="20" height="20">
                            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    
                    <div class="flow-preview">
                        <div class="flow-item">
                            <span class="flow-emoji">ðŸ’Ž</span>
                            <span class="flow-label">Value</span>
                        </div>
                        <div class="flow-item">
                            <span class="flow-emoji">ðŸ“Š</span>
                            <span class="flow-label">Info</span>
                        </div>
                        <div class="flow-item">
                            <span class="flow-emoji">âš¡</span>
                            <span class="flow-label">Work</span>
                        </div>
                        <div class="flow-item">
                            <span class="flow-emoji">ðŸ’°</span>
                            <span class="flow-label">Cash</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Container (Hidden Initially) -->
            <div class="chat-container" id="chatContainer" style="display: none;">
                <div class="chat-messages" id="chatMessages">
                    <!-- Messages will be added here dynamically -->
                </div>
                
                <!-- Input Bar (Part of Chat Container) -->
                <div class="input-bar" id="inputBar">
                    <!-- Input Container -->
                    <div class="input-container">
                        <!-- Input Field -->
                        <div class="input-field-wrapper">
                            <input 
                                type="text" 
                                class="input-field" 
                                id="messageInput"
                                placeholder="Ask about your business..."
                                autocomplete="off"
                                spellcheck="true"
                            />
                        </div>

                        <!-- Action Buttons -->
                        <button class="input-action-btn" id="attachBtn" aria-label="Attach">
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13" stroke="currentColor" fill="none" stroke-width="2"/>
                            </svg>
                        </button>
                        
                        <!-- Send Button -->
                        <button class="send-btn" id="sendBtn" aria-label="Send">
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

        </div>

        <!-- Telegram Bottom Bar -->
        <div class="telegram-bottom-bar">
            <button class="tg-nav-btn">
                <svg viewBox="0 0 24 24" width="20" height="20">
                    <path fill="currentColor" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                </svg>
                <span>Home</span>
            </button>
            <button class="tg-nav-btn active">
                <svg viewBox="0 0 24 24" width="20" height="20">
                    <path fill="currentColor" d="M4 4h7v7H4V4zm9 0h7v7h-7V4zM4 13h7v7H4v-7zm9 0h7v7h-7v-7z"/>
                </svg>
                <span>Apps</span>
            </button>
            <button class="tg-nav-btn">
                <svg viewBox="0 0 24 24" width="20" height="20">
                    <path fill="currentColor" d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/>
                </svg>
                <span>Chats</span>
            </button>
            <button class="tg-nav-btn">
                <svg viewBox="0 0 24 24" width="20" height="20">
                    <path fill="currentColor" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
                <span>Profile</span>
            </button>
        </div>
    </div>

    <script src="js/telegram-integration.js"></script>
    <script src="js/chat-app.js"></script>
</body>
</html>